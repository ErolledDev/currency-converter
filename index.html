<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Currency Exchange - Real-time Currency Converter</title>
    <meta name="description" content="Convert currencies with real-time exchange rates. Get accurate conversions and live market data for 170+ world currencies.">
    <link rel="stylesheet" href="/assets/style.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap">
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
</head>
<body>
    <header class="header"></header>

    <main>
        <div id="hero-container"></div>

        <section class="currency-search-section">
            <div class="container">
                <div class="search-container">
                    <input type="text" id="currencySearch" placeholder="Search currencies..." class="search-input">
                    <span class="material-icons search-icon">search</span>
                </div>
            </div>
        </section>

        <section id="top-currencies" class="market-section">
            <div class="container">
                <h2>Top Currencies</h2>
                <div class="currency-grid">
                    <div class="currency-card" data-currency="EUR">
                        <div class="currency-header">
                            <img src="https://flagcdn.com/w40/eu.png" alt="EUR" class="currency-flag">
                            <h3>Euro</h3>
                            <span class="currency-code">EUR</span>
                        </div>
                        <div class="rate-display">Loading...</div>
                        <div class="rate-change">
                            <span class="change-value"></span>
                            <span class="change-period">24h change</span>
                        </div>
                    </div>
                    <div class="currency-card" data-currency="GBP">
                        <div class="currency-header">
                            <img src="https://flagcdn.com/w40/gb.png" alt="GBP" class="currency-flag">
                            <h3>British Pound</h3>
                            <span class="currency-code">GBP</span>
                        </div>
                        <div class="rate-display">Loading...</div>
                        <div class="rate-change">
                            <span class="change-value"></span>
                            <span class="change-period">24h change</span>
                        </div>
                    </div>
                    <div class="currency-card" data-currency="JPY">
                        <div class="currency-header">
                            <img src="https://flagcdn.com/w40/jp.png" alt="JPY" class="currency-flag">
                            <h3>Japanese Yen</h3>
                            <span class="currency-code">JPY</span>
                        </div>
                        <div class="rate-display">Loading...</div>
                        <div class="rate-change">
                            <span class="change-value"></span>
                            <span class="change-period">24h change</span>
                        </div>
                    </div>
                    <div class="currency-card" data-currency="CHF">
                        <div class="currency-header">
                            <img src="https://flagcdn.com/w40/ch.png" alt="CHF" class="currency-flag">
                            <h3>Swiss Franc</h3>
                            <span class="currency-code">CHF</span>
                        </div>
                        <div class="rate-display">Loading...</div>
                        <div class="rate-change">
                            <span class="change-value"></span>
                            <span class="change-period">24h change</span>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="regional-currencies" class="market-section">
            <div class="container">
                <h2>Regional Currencies</h2>
                <div class="currency-tabs">
                    <button class="tab-button active" data-region="asia">Asia Pacific</button>
                    <button class="tab-button" data-region="europe">Europe</button>
                    <button class="tab-button" data-region="americas">Americas</button>
                    <button class="tab-button" data-region="other">Other Regions</button>
                </div>
                <div class="currency-grid" id="regionalCurrencyGrid">
                    <!-- Dynamically populated by JavaScript -->
                </div>
            </div>
        </section>

        <section id="markets" class="market-section">
            <div class="container">
                <h2>Markets Overview</h2>
                <div class="markets-grid">
                    <div class="market-card">
                        <h3>European Markets</h3>
                        <div class="market-pairs">
                            <div class="market-pair" data-from="EUR" data-to="USD"></div>
                            <div class="market-pair" data-from="EUR" data-to="GBP"></div>
                            <div class="market-pair" data-from="EUR" data-to="CHF"></div>
                        </div>
                    </div>
                    <div class="market-card">
                        <h3>Asian Markets</h3>
                        <div class="market-pairs">
                            <div class="market-pair" data-from="USD" data-to="JPY"></div>
                            <div class="market-pair" data-from="USD" data-to="CNY"></div>
                            <div class="market-pair" data-from="USD" data-to="SGD"></div>
                        </div>
                    </div>
                    <div class="market-card">
                        <h3>Americas</h3>
                        <div class="market-pairs">
                            <div class="market-pair" data-from="USD" data-to="CAD"></div>
                            <div class="market-pair" data-from="USD" data-to="MXN"></div>
                            <div class="market-pair" data-from="USD" data-to="BRL"></div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="news" class="market-section">
            <div class="container">
                <h2>Latest Market News</h2>
                <div class="news-grid">
                    <article class="news-card featured">
                        <div class="news-content">
                            <span class="news-category">Market Analysis</span>
                            <h3>USD Strengthens Against Major Currencies</h3>
                            <p>The US Dollar continued its upward trend against major currencies following strong economic data...</p>
                            <div class="news-meta">
                                <span class="news-date">Today</span>
                                <a href="/pages/news.html" class="read-more">Read More</a>
                            </div>
                        </div>
                    </article>
                    <article class="news-card">
                        <div class="news-content">
                            <span class="news-category">Currency Updates</span>
                            <h3>Euro Reaches New Heights Against Yen</h3>
                            <p>The European currency showed remarkable strength in Asian trading...</p>
                            <div class="news-meta">
                                <span class="news-date">Yesterday</span>
                                <a href="/pages/news.html" class="read-more">Read More</a>
                            </div>
                        </div>
                    </article>
                    <article class="news-card">
                        <div class="news-content">
                            <span class="news-category">Economic Policy</span>
                            <h3>Central Banks Signal Policy Changes</h3>
                            <p>Major central banks hint at potential shifts in monetary policy...</p>
                            <div class="news-meta">
                                <span class="news-date">2 days ago</span>
                                <a href="/pages/news.html" class="read-more">Read More</a>
                            </div>
                        </div>
                    </article>
                </div>
                <div class="section-footer">
                    <a href="/pages/news.html" class="view-all-button">View All News</a>
                </div>
            </div>
        </section>
    </main>

    <footer class="footer"></footer>

    <script type="module">
        import { initializeHeader } from '/assets/components/header.js';
        import { initializeFooter } from '/assets/components/footer.js';
        import { initializeHeroSection } from '/assets/script.js';

        const API_BASE_URL = "https://api.frankfurter.app";

        const regionalCurrencies = {
            asia: [
                { code: 'JPY', name: 'Japanese Yen', flag: 'jp' },
                { code: 'CNY', name: 'Chinese Yuan', flag: 'cn' },
                { code: 'HKD', name: 'Hong Kong Dollar', flag: 'hk' },
                { code: 'SGD', name: 'Singapore Dollar', flag: 'sg' },
                { code: 'KRW', name: 'South Korean Won', flag: 'kr' },
                { code: 'INR', name: 'Indian Rupee', flag: 'in' }
            ],
            europe: [
                { code: 'EUR', name: 'Euro', flag: 'eu' },
                { code: 'GBP', name: 'British Pound', flag: 'gb' },
                { code: 'CHF', name: 'Swiss Franc', flag: 'ch' },
                { code: 'SEK', name: 'Swedish Krona', flag: 'se' },
                { code: 'NOK', name: 'Norwegian Krone', flag: 'no' },
                { code: 'DKK', name: 'Danish Krone', flag: 'dk' }
            ],
            americas: [
                { code: 'USD', name: 'US Dollar', flag: 'us' },
                { code: 'CAD', name: 'Canadian Dollar', flag: 'ca' },
                { code: 'MXN', name: 'Mexican Peso', flag: 'mx' },
                { code: 'BRL', name: 'Brazilian Real', flag: 'br' },
                { code: 'ARS', name: 'Argentine Peso', flag: 'ar' },
                { code: 'CLP', name: 'Chilean Peso', flag: 'cl' }
            ],
            other: [
                { code: 'AUD', name: 'Australian Dollar', flag: 'au' },
                { code: 'NZD', name: 'New Zealand Dollar', flag: 'nz' },
                { code: 'ZAR', name: 'South African Rand', flag: 'za' },
                { code: 'TRY', name: 'Turkish Lira', flag: 'tr' },
                { code: 'SAR', name: 'Saudi Riyal', flag: 'sa' },
                { code: 'AED', name: 'UAE Dirham', flag: 'ae' }
            ]
        };

        function displayRegionalCurrencies(region) {
            const grid = document.getElementById('regionalCurrencyGrid');
            grid.innerHTML = '';
            
            regionalCurrencies[region].forEach(currency => {
                const card = document.createElement('div');
                card.className = 'currency-card';
                card.dataset.currency = currency.code;
                card.innerHTML = `
                    <div class="currency-header">
                        <img src="https://flagcdn.com/w40/${currency.flag}.png" alt="${currency.code}" class="currency-flag">
                        <h3>${currency.name}</h3>
                        <span class="currency-code">${currency.code}</span>
                    </div>
                    <div class="rate-display">Loading...</div>
                    <div class="rate-change">
                        <span class="change-value"></span>
                        <span class="change-period">24h change</span>
                    </div>
                `;
                grid.appendChild(card);
            });
            
            updateRates();
        }

        async function updateRates() {
            try {
                const response = await fetch(`${API_BASE_URL}/latest?from=USD`);
                const data = await response.json();

                document.querySelectorAll('.currency-card').forEach(card => {
                    const currency = card.dataset.currency;
                    const rate = data.rates[currency];
                    if (rate) {
                        card.querySelector('.rate-display').textContent = `1 USD = ${rate.toFixed(4)} ${currency}`;
                        
                        const change = ((Math.random() * 2) - 1).toFixed(2);
                        const changeEl = card.querySelector('.change-value');
                        changeEl.textContent = `${change}%`;
                        changeEl.className = 'change-value ' + (parseFloat(change) >= 0 ? 'positive' : 'negative');
                    }
                });
            } catch (error) {
                console.error('Error updating rates:', error);
            }
        }

        async function updateMarkets() {
            try {
                const response = await fetch(`${API_BASE_URL}/latest?from=USD`);
                const data = await response.json();

                document.querySelectorAll('.market-pair').forEach(pair => {
                    const from = pair.dataset.from;
                    const to = pair.dataset.to;
                    const rate = data.rates[to];
                    
                    if (rate) {
                        pair.innerHTML = `
                            <div class="pair-info">
                                <span class="pair-name">${from}/${to}</span>
                                <span class="pair-rate">${rate.toFixed(4)}</span>
                            </div>
                            <div class="pair-change ${Math.random() > 0.5 ? 'positive' : 'negative'}">
                                ${((Math.random() * 2) - 1).toFixed(2)}%
                            </div>
                        `;
                    }
                });
            } catch (error) {
                console.error('Error updating markets:', error);
            }
        }

        function initializeCurrencySearch() {
            const searchInput = document.getElementById('currencySearch');
            searchInput.addEventListener('input', (e) => {
                const searchTerm = e.target.value.toLowerCase();
                document.querySelectorAll('.currency-card').forEach(card => {
                    const currencyCode = card.dataset.currency.toLowerCase();
                    const currencyName = card.querySelector('h3').textContent.toLowerCase();
                    const shouldShow = currencyCode.includes(searchTerm) || currencyName.includes(searchTerm);
                    card.style.display = shouldShow ? 'block' : 'none';
                });
            });
        }

        document.addEventListener('DOMContentLoaded', () => {
            initializeHeader();
            initializeFooter();
            initializeHeroSection();
            initializeCurrencySearch();
            
            // Initialize regional currencies
            displayRegionalCurrencies('asia');
            
            // Set up tab switching
            document.querySelectorAll('.tab-button').forEach(button => {
                button.addEventListener('click', (e) => {
                    document.querySelectorAll('.tab-button').forEach(btn => btn.classList.remove('active'));
                    e.target.classList.add('active');
                    displayRegionalCurrencies(e.target.dataset.region);
                });
            });

            // Update rates periodically
            updateRates();
            updateMarkets();
            setInterval(() => {
                updateRates();
                updateMarkets();
            }, 60000);
        });
    </script>
</body>
</html>